image: registry.cn-hangzhou.aliyuncs.com/choerodon-tools/cifront:0.7.0

stages:
  - test

variables:
  GIT_SUBMODULE_STRATEGY: recursive

test:
  stage: test
  script:
    - npm config set registry http://nexus.paas-pro.haier.net/repository/dts-npm-group/
    - npm i
    - npm run lint
    - npm test
    - npm run es5